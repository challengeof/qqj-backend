<loader class="maskLayer"></loader>
<div class="container-fluid">
    <!-- 页面标题 -->
    <div class="row">
        <div class="col-lg-12">
            <h2 class="page-header">{{requestTypes[InParam.type].title}}</h2>
        </div>
    </div>

    <!-- 添加商品表单 -->
    <div class="row">
        <div class="col-lg-12">
            <form rol="form" class="form-group" ng-submit="submit();"  name="infoForm" >

                <div ng-if="InParam.type==requestTypes.audit.key" class="form-group">
                    <label><font color="red">*</font>审核:</label>
                    <div class="row alert alert-warning" role="alert">
                        <div class="col-xs-6 col-md-4">
                            <select  required class="form-control" ng-model="formData.restaurantStatus" ng-options="o.value as o.name for o in availableStatus" required>
                                <option value="">请选择-审核结果</option>
                            </select>
                        </div>

                        <div class="col-xs-6 col-md-4" ng-if="formData.restaurantStatus==3">
                            <select  name="cityId" required class="form-control" ng-model="formData.restaurantReason" ng-options="o.value as o.name for o in restaurantReasons" required>
                                <option value="">请选择-失效原因</option>
                            </select>
                        </div>
                        <div class="row">
                            <button type="submit"  class="btn btn-primary" >&nbsp;&nbsp;提&nbsp;&nbsp;交&nbsp;&nbsp;</button>
                            <a back class="btn btn-info">&nbsp;&nbsp;返&nbsp;&nbsp;回&nbsp;&nbsp;</a>
                        </div>
                    </div>

                </div>

                <div class="form-group">
                    <label><font color="red">*</font>基本信息:</label>
                    <div class="row alert alert-warning" role="alert">
                        <div class="col-xs-6 col-md-4">
                            <label><font color="red">*</font>登陆名(手机号):</label>
                            <input required type="text" ng-disabled="InParam.type!=requestTypes.add.key" placeholder="请输入手机号" onkeyup="this.value=this.value.replace(/\D/g,'');" onblur="this.value=this.value.replace(/\D/g,'');"  class="form-control" ng-model="formData.telephone">
                        </div>
                        <div ng-if="InParam.type==requestTypes.add.key" class="col-xs-6 col-md-4">
                            <label>密码:</label>
                            <input minlength="6" pattern="[0-9a-zA-Z]+" placeholder="请设置6-12位英文/数字/符号密码" required type="text" class="form-control" ng-model="formData.password">
                        </div>

                        <div class="col-xs-6 col-md-4">
                            <label><font color="red">*</font>城市:</label>
                            <select ng-disabled="InParam.type!=requestTypes.add.key && formData.cityId!=null" name="cityId" required class="form-control" ng-model="formData.cityId" ng-options="city.id as city.name for city in cities" required>
                                <option value="">请选择-城市</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label><font color="red">*</font>餐馆信息:</label>
                    <div class="row alert alert-warning" role="alert">

                        <div class="col-xs-6 col-md-4">
                            <label><font color="red">*</font>店名:</label>
                            <input required maxlength="250" type="text" class="form-control" ng-model="formData.restaurantName">
                        </div>
                        <div class="col-xs-6 col-md-4">
                            <label><font color="red">*</font>联系人:</label>
                            <input required maxlength="250" type="text" class="form-control" ng-model="formData.receiver">
                        </div>
                        <div class="col-xs-6 col-md-4">
                            <label><font color="red">*</font>地址:</label>
                            <input required maxlength="250" type="text" class="form-control" ng-model="formData.restaurantAddress">
                        </div>
                        <div class="col-xs-6 col-md-4">
                            <label><font color="red">*</font>经纬度: <a class="btn btn-xs btn-info" target="_blank" href="http://api.map.baidu.com/lbsapi/getpoint/">百度地图坐标拾取</a></label>
                            <input required type="text" placeholder="经纬度 格式:  经度,纬度"
                                   class="form-control" ng-model="formData.latLng">
                        </div>
                        <div class="col-xs-6 col-md-4">
                            <label>详细地址(街道或门牌号等):</label>
                            <input type="text" maxlength="250" class="form-control" ng-model="formData.restaurantStreetNumber">
                        </div>
                        <div class="col-xs-6 col-md-4">

                            <label><font color="red">*</font>区块:<a class="btn btn-xs btn-info" ng-click="blockAuto(restaurant)">自动匹配</a></label>
                                    <span class="nullable" ng-class="{'has-error':formData.blockId==null}" >
                                        <ui-select   refresh-enabled="Integer" ng-model="formData.blockId" theme="bootstrap" reset-search-input="true">
                                            <ui-select-match allow-clear placeholder="请选择-区块">
                                                {{$select.selected.name}}
                                            </ui-select-match>
                                            <ui-select-choices repeat="block.id as block in blocks | filter: $select.search" refresh-delay="0">
                                                <span ng-bind-html="block.name | highlight: $select.search"></span>
                                            </ui-select-choices>
                                        </ui-select>
                                    </span>
                        </div>
                        <div class="col-xs-6 col-md-4 ">
                            <label><font color="red">*</font>餐馆分类:</label>
                                    <span class="nullable" ng-class="{'has-error':formData.restaurantType==null}">
                                        <ui-select   refresh-enabled="Integer" ng-model="formData.restaurantType" theme="bootstrap" reset-search-input="true">
                                            <ui-select-match allow-clear placeholder="请选择-餐馆分类">
                                                {{$select.selected.hierarchyName}}
                                            </ui-select-match>
                                            <ui-select-choices repeat="rtype.id as rtype in restaurantType | filter: $select.search" refresh-delay="0">
                                                <span ng-bind-html="rtype.hierarchyName | highlight: $select.search"></span>
                                            </ui-select-choices>
                                        </ui-select>
                                    </span>
                        </div>
                        <div class="col-xs-6 col-md-4">
                            <label>合作状态:</label>
                            <select class="form-control"  ng-model="formData.cooperatingState" ng-options="cooperatingState.val as cooperatingState.detail for cooperatingState in cooperatingStates" >
                                <option value="">请选择-合作状态</option>
                            </select>
                        </div>

                    </div>
                </div>

                <div class="form-group" ng-if="InParam.type!=requestTypes.add.key">
                    <label>销售人员:</label>
                    <div class="row alert alert-info" role="alert">
                        <div class="col-xs-6 col-md-4">
                            <label>开发人员:</label>
                            <select disabled  class="form-control" ng-model="formData.devUserId" ng-options="user.id as user.realname for user in adminUsers" required>
                            </select>
                        </div>
                        <div class="col-xs-6 col-md-4">
                            <label>维护人员:</label>
                            <select disabled  class="form-control" ng-model="formData.adminUserId" ng-options="user.id as user.realname for user in adminUsers" required>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label>发货信息:</label>
                    <div class="row alert alert-info" role="alert">
                        <div class="col-xs-6 col-md-4">
                            <label>进货频率:</label>
                            <div class="input-group">
                                <input type="number" min="0" step="1" class="form-control ng-pristine ng-untouched ng-valid" ng-model="formData.stockRate" aria-describedby="basic-singleLong">
                                <span class="input-group-addon" id="basic-singleLong">天</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label>其他联系方式:</label>
                    <div class="row alert alert-info" role="alert">
                        <div class="col-xs-6 col-md-4">
                            <label>联系人2:</label>
                            <input type="text" maxlength="250" class="form-control" ng-model="formData.receiver2">
                        </div>
                        <div class="col-xs-6 col-md-4">
                            <label>联系人2电话:</label>
                            <input type="text" maxlength="250" onkeyup="this.value=this.value.replace(/\D/g,'');" class="form-control" ng-model="formData.telephone2">
                        </div>
                        <div class="col-xs-6 col-md-4">
                            <label>联系人3:</label>
                            <input type="text" maxlength="250" class="form-control" ng-model="formData.receiver3">
                        </div>
                        <div class="col-xs-6 col-md-4">
                            <label>联系人3电话:</label>
                            <input type="text" maxlength="250" onkeyup="this.value=this.value.replace(/\D/g,'');" class="form-control" ng-model="formData.telephone3">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label>其他信息:</label>
                    <div class="row alert alert-info" role="alert">

                                <div class="col-xs-6 col-md-4">
                                    <label>客户关心点:</label>
                                    <input type="text" maxlength="250" class="form-control" ng-model="formData.concern">
                                </div>
                                <div class="col-xs-6 col-md-4">
                                    <label>竞争对手:</label>
                                    <input type="text" maxlength="250" class="form-control" ng-model="formData.opponent">
                                </div>
                                <div class="col-xs-6 col-md-4">
                                    <label>特殊需求:</label>
                                    <input type="text" maxlength="250" class="form-control" ng-model="formData.specialReq">
                                </div>


                    </div>

                </div>

                <div ng-if="InParam.type!=requestTypes.add.key" class="form-group dataTable_wrapper">

                        <div class="row panel panel-warning">
                            <div class="panel-heading"><strong>修改记录</strong></div>
                            <table class="table table-striped table-bordered table-hover">
                                <thead>
                                    <tr>
                                        <th>节点</th>
                                        <th>时间</th>
                                        <th>操作人</th>
                                        <!--<th>类型</th>-->
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr >
                                        <td>创建时间</td>
                                        <td>{{formData.restaurantCreateTime| date : "yyyy-MM-dd HH:mm:ss"}}</td>
                                        <td>{{formData.restaurantCreateOperater.realname}}</td>
                                        <!--<td>{{}}</td>-->
                                    </tr>
                                    <tr >
                                        <td>最后修改时间</td>
                                        <td>{{formData.restaurantLastOperateTime| date : "yyyy-MM-dd HH:mm:ss"}}</td>
                                        <td>{{formData.restaurantLastOperater.realname}}</td>
                                        <!--<td>{{}}</td>-->
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                </div>


                <!--<div class="form-group">-->
                    <!--<div class=" row col-lg-12 dataTable_wrapper">-->
                        <!--<div class="panel panel-warning">-->
                            <!--<div class="panel-heading"><strong>出库单日志</strong></div>-->
                            <!--<table class="table table-striped table-bordered table-hover">-->
                                <!--<thead>-->
                                <!--<tr>-->
                                    <!--<th>节点</th>-->
                                    <!--<th>时间</th>-->
                                    <!--<th>操作人</th>-->
                                <!--</tr>-->
                                <!--</thead>-->
                                <!--<tbody>-->
                                <!--&lt;!&ndash; ngIf: stockOut.stockOutTypeCode==1 &ndash;&gt;<tr ng-if="stockOut.stockOutTypeCode==1" class="ng-scope">-->
                                    <!--<td>下单</td>-->
                                    <!--<td class="ng-binding">2016-03-03 02:47:59</td>-->
                                    <!--<td class="ng-binding">18380388688</td>-->
                                <!--</tr>&lt;!&ndash; end ngIf: stockOut.stockOutTypeCode==1 &ndash;&gt;-->
                                <!--&lt;!&ndash; ngIf: stockOut.stockOutTypeCode==2 &ndash;&gt;-->
                                <!--&lt;!&ndash; ngIf: stockOut.stockOutTypeCode==2 &ndash;&gt;-->
                                <!--&lt;!&ndash; ngIf: stockOut.stockOutTypeCode==3 &ndash;&gt;-->
                                <!--&lt;!&ndash; ngIf: stockOut.stockOutTypeCode==3 &ndash;&gt;-->
                                <!--<tr>-->
                                    <!--<td>出库</td>-->
                                    <!--<td class="ng-binding">2016-03-07 15:15:17</td>-->
                                    <!--<td class="ng-binding">樊博文</td>-->
                                <!--</tr>-->
                                <!--&lt;!&ndash; ngIf: stockOut.stockOutTypeCode==1 &ndash;&gt;<tr ng-if="stockOut.stockOutTypeCode==1" class="ng-scope">-->
                                    <!--<td>收货</td>-->
                                    <!--<td class="ng-binding"></td>-->
                                    <!--<td class="ng-binding"></td>-->
                                <!--</tr>&lt;!&ndash; end ngIf: stockOut.stockOutTypeCode==1 &ndash;&gt;-->
                                <!--</tbody>-->
                            <!--</table>-->
                        <!--</div>-->
                    <!--</div>-->
                <!--</div>-->

                <div>
                    <button type="submit"  class="btn btn-primary" ng-disabled="verify()==false" >&nbsp;&nbsp;提&nbsp;&nbsp;交&nbsp;&nbsp;</button>
                    <a back class="btn btn-info">&nbsp;&nbsp;返&nbsp;&nbsp;回&nbsp;&nbsp;</a>
                </div>

            </form>
        </div>
    </div>
</div>