<div class="container-fluid">
    <div class="row">
        <div class="col-lg-12">
            <h2 class="page-header">{{title}}</h2>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-12">
            <div class="panel panel-default">
                <div id="collapseTwo" class="panel-collapse collapse in">
                    <div class="panel-body">
                        <form rol="form" class="form-inline">
                            <div class="form-group">
                                <label>城市:</label>
                                <select class="form-control" ng-model="searchForm.cityId" ng-options="city.id as city.name for city in cities" refresh-enabled="Integer">
                                    <option value="">请选择</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>店面:</label>
                                <select class="form-control" ng-model="searchForm.organizationId" ng-options="o.id as o.name for o in organizations" refresh-enabled="Integer">
                                    <option value="">请选择</option>
                                </select>
                            </div>
                            <!--<div class="form-group">-->
                                <!--<label>市场:</label>-->
                                <!--<select class="form-control" ng-model="searchForm.warehouseId" ng-options="o.id as o.name for o in availableWarehouses" refresh-enabled="Integer">-->
                                    <!--<option value="">请选择</option>-->
                                <!--</select>-->
                            <!--</div>-->
                            <div class="form-group">
                                <label>供应商:</label>
                            </div>
                            <div class="form-group">
                                <refresh-enabled type="Integer" ng-model="searchForm.vendorId">
                                    <ui-select class="editable-input" name="vendorId" ng-model="searchForm.vendorId" theme="bootstrap">
                                        <ui-select-match allow-clear placeholder="请选择">{{$select.selected.name}}</ui-select-match>
                                        <ui-select-choices refresh-delay="0" repeat="vendor.id as vendor in vendors | filter: $select.search">
                                            <span ng-bind-html="vendor.name | highlight: $select.search"></span>
                                        </ui-select-choices>
                                    </ui-select>
                                </refresh-enabled>
                            </div>
                            <div class="form-group">
                                <label>分类:</label>
                            </div>
                            <div class="form-group">
                                <refresh-enabled type="Integer" ng-model="searchForm.categoryId">
                                    <ui-select class="editable-input" ng-model="searchForm.categoryId" theme="bootstrap" reset-search-input="true">
                                        <ui-select-match allow-clear placeholder="请选择-分类">{{$select.selected.hierarchyName}}</ui-select-match>
                                        <ui-select-choices repeat="category.id as category in categories | filter: $select.search" refresh-delay="0">
                                            <span ng-bind-html="category.hierarchyName | highlight: $select.search"></span>
                                        </ui-select-choices>
                                    </ui-select>
                                </refresh-enabled>
                            </div>
                            <div class="form-group">
                                <label>状态:</label>
                                <select class="form-control" ng-model="searchForm.status" ng-options="o.value as o.name for o in status" refresh-enabled="Integer">
                                </select>
                            </div>
                            <div class="form-group">
                                <label>产品id:</label>
                                <input type="text" class="form-control" ng-model="searchForm.productId" refresh-enabled="Integer">
                            </div>
                            <div class="form-group">
                                <label>skuid:</label>
                                <input type="text" class="form-control" ng-model="searchForm.skuId" refresh-enabled="Integer">
                            </div>
                            <div class="form-group">
                                <label>产品名称:</label>
                                <input type="text" class="form-control" ng-model="searchForm.productName" refresh-enabled="String">
                            </div>
                            <button type="submit" class="btn btn-primary" ng-click="search()">&nbsp;&nbsp;搜&nbsp;&nbsp;索&nbsp;&nbsp;</button>
                            <button type="submit" ng-disabled="!searchForm.cityId" class="btn btn-primary" ng-click="export()">&nbsp;&nbsp;导&nbsp;&nbsp;出&nbsp;&nbsp;</button>
                        </form>
                    </div>
                </div>
            </div>

        </div>
    </div>
    <br>

    <div class="row">
        <div class="col-lg-12 dataTable_wrapper table-responsive">
            <table class="table table-striped  table-bordered table-hover">
                <thead>
                <tr>
                    <th ng-if="showFixedPrice||showPurchasePrice||showPriceLimit||showSalePrice">操作</th>
                    <th>城市</th>
                    <th style="width:6%">供应商</th>
                    <th>skuID</th>
                    <th style="width:10%">名称</th>
                    <th>状态</th>
                    <th>转化率</th>
                    <th ng-if="showFixedPrice">改前定价</th>
                    <th ng-if="showFixedPrice||showPrimary">定价</th>
                    <th ng-if="showFixedPrice">涨价额</th>
                    <th ng-if="showFixedPrice">涨价幅度</th>
                    <th ng-if="showPurchasePrice">上次采购价</th>
                    <th ng-if="showPurchasePrice||showPrimary">采购价</th>
                    <th ng-if="showPurchasePrice">涨价额</th>
                    <th ng-if="showPurchasePrice">涨价幅度</th>
                    <th>成本价</th>
                    <th>单位</th>
                    <th ng-if="showPriceLimit">改前限价</th>
                    <th ng-if="showPriceLimit||showPrimary">限价</th>
                    <th ng-if="showPriceLimit">涨价额</th>
                    <th ng-if="showPriceLimit">涨价幅度</th>
                    <th ng-if="showSalePrice">改前售价</th>
                    <th ng-if="showSalePrice||showPrimary">售价</th>
                    <th ng-if="showSalePrice">涨价额</th>
                    <th ng-if="showSalePrice">涨价幅度</th>
                    <th>打包单位</th>
                    <th ng-if="showPriceLimit">改前限价</th>
                    <th ng-if="showPriceLimit||showPrimary">限价</th>
                    <th ng-if="showPriceLimit">涨价额</th>
                    <th ng-if="showPriceLimit">涨价幅度</th>
                    <th ng-if="showSalePrice">改前售价</th>
                    <th ng-if="showSalePrice||showPrimary">售价</th>
                    <th ng-if="showSalePrice">涨价额</th>
                    <th ng-if="showSalePrice">涨价幅度</th>
                    <th ng-if="showFixedPrice||showPurchasePrice||showPriceLimit||showSalePrice">修改人</th>
                    <th ng-if="showFixedPrice||showPurchasePrice||showPriceLimit||showSalePrice">修改时间</th>
                    <th ng-if="showFixedPrice||showPriceLimit">原因</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="skuPrice in skuPriceList">
                    <td ng-if="showFixedPrice||showPurchasePrice||showPriceLimit||showSalePrice">
                        <a ng-if="showFixedPrice||showPurchasePrice" class="btn btn-xs btn-primary" ui-sref="oam.sku-price-history-list({skuId:skuPrice.skuId,type:type,cityId:skuPrice.cityId})">明细</a>
                        <a ng-if="showPriceLimit||showSalePrice" class="btn btn-xs btn-primary" ui-sref="oam.sku-price-history-list({skuId:skuPrice.skuId,type:type,single:true,cityId:skuPrice.cityId})">单品明细</a>
                        <a ng-if="showPriceLimit||showSalePrice" class="btn btn-xs btn-primary" ui-sref="oam.sku-price-history-list({skuId:skuPrice.skuId,type:type,single:false,cityId:skuPrice.cityId})">打包明细</a>
                    </td>
                    <td>{{skuPrice.city}}</td>
                    <td>{{skuPrice.vendor}}</td>
                    <td>{{skuPrice.skuId}}</td>
                    <td>{{skuPrice.name}}</td>
                    <td>{{skuPrice.status.name}}</td>
                    <td>{{skuPrice.capacityInBundle}}</td>
                    <td ng-if="showFixedPrice">{{skuPrice.oldFixedPrice}}</td>
                    <td ng-if="showFixedPrice||showPrimary">{{skuPrice.fixedPrice}}</td>
                    <td ng-if="showFixedPrice">{{skuPrice.fixedPriceInc}}</td>
                    <td ng-if="showFixedPrice">{{skuPrice.fixedPriceIncRate}}</td>
                    <td ng-if="showPurchasePrice">{{skuPrice.oldLastPurchasePrice}}</td>
                    <td ng-if="showPurchasePrice||showPrimary">{{skuPrice.lastPurchasePrice}}</td>
                    <td ng-if="showPurchasePrice">{{skuPrice.lastPurchasePriceInc}}</td>
                    <td ng-if="showPurchasePrice">{{skuPrice.lastPurchasePriceIncRate}}</td>
                    <td>{{skuPrice.avgCost}}</td>
                    <td>{{skuPrice.singleUnit}}</td>
                    <td ng-if="showPriceLimit">{{skuPrice.oldSingleSalePriceLimit}}</td>
                    <td ng-if="showPriceLimit||showPrimary">{{skuPrice.singleSalePriceLimit}}</td>
                    <td ng-if="showPriceLimit">{{skuPrice.singleSalePriceLimitInc}}</td>
                    <td ng-if="showPriceLimit">{{skuPrice.singleSalePriceLimitIncRate}}</td>
                    <td ng-if="showSalePrice">{{skuPrice.oldSingleSalePrice}}</td>
                    <td ng-if="showSalePrice||showPrimary">{{skuPrice.singleSalePrice}}</td>
                    <td ng-if="showSalePrice">{{skuPrice.singleSalePriceInc}}</td>
                    <td ng-if="showSalePrice">{{skuPrice.singleSalePriceIncRate}}</td>
                    <td>{{skuPrice.bundleUnit}}</td>
                    <td ng-if="showPriceLimit">{{skuPrice.oldBundleSalePriceLimit}}</td>
                    <td ng-if="showPriceLimit||showPrimary">{{skuPrice.bundleSalePriceLimit}}</td>
                    <td ng-if="showPriceLimit">{{skuPrice.bundleSalePriceLimitInc}}</td>
                    <td ng-if="showPriceLimit">{{skuPrice.bundleSalePriceLimitIncRate}}</td>
                    <td ng-if="showSalePrice">{{skuPrice.oldBundleSalePrice}}</td>
                    <td ng-if="showSalePrice||showPrimary">{{skuPrice.bundleSalePrice}}</td>
                    <td ng-if="showSalePrice">{{skuPrice.bundleSalePriceInc}}</td>
                    <td ng-if="showSalePrice">{{skuPrice.bundleSalePriceIncRate}}</td>
                    <td ng-if="showFixedPrice||showPurchasePrice||showPriceLimit||showSalePrice">{{skuPrice.modifyAdminUser}}</td>
                    <td ng-if="showFixedPrice||showPurchasePrice||showPriceLimit||showSalePrice">{{skuPrice.modifyTime}}</td>
                    <td ng-if="showFixedPrice||showPriceLimit">{{skuPrice.reason}}</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="row" align="center">
        <div calss="col-lg-12">
            <pagination total-items="page.totalItems" ng-model="page.currentPage" items-per-page="page.itemsPerPage" max-size="10" class="pagination" boundary-links="true" ng-change="pageChanged()" first-text="首页" last-text="尾页" previous-text="上一页" next-text="下一页"></pagination>
        </div>
    </div>

    <loader class="maskLayer"></loader>
</div>
    